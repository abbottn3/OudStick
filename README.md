# OudStick
The code provided is intended for use with the Teensy 3.6. The Arduino IDE in conjunction with the Teensy software allows the code to be written to the board.

Complex6StringMIDI utilizes the MIDI.h library to send MIDI signals through the serial connection. The main function used in this library is MIDI.sendNoteOn(note, volume, channel). The note part of the command is the pitch. The pitch value is a char, and each single unit represents a semitone (ie 60 is middle C, and 61 is C sharp). The volume is out of 100 and determines the attack of the note to be sent to the computer. Lastly, the channel portion of the command is how MIDI instructions are read. There can be up to 15 channels, which allows you to soften one of those notes or bend the pitch (going inbetween semitones). If each string's command is sent on a different channel, adjusting certain qualities of that channel allows it to be edited alone without affecting the others.

As MIDI communication is the overall output of the code, we must go over how the input is read and converted into it. The code is built around an N_STR variable, allowing for any number of strings to be used. The rest of the code is broken up into different functions that read and convert the analog reading of the connected hardware. Specifically, the functions are: readControls(), determineFrets(), legatoTest(), pickNotes(), and cleanUp(). These functions are all called upon in that order during the loop of the microcontroller. They are split up in this way to provide modularity and clarity to the code, allowing for easy bugfixing and efficiency improvement of single parts of the code. Each of these functions' processes and dataflows are aptly explained in the comments of the code.

The setup of the code is self-explanatory. This software specifically is working with six strip potentiometers and six pickup signals. Thus, the input pins are assigned accordingly. For modularity purposes, these inputs can be switched out with other similar components. There is even a calibration for the pickup, allowing any kind to be used, as long as some of the thresholds are edited as needed. The threshold value is calibrated in the beginning because even with the use of the same pickup, the noise around the device skews the data according to the environment. Thus, the device calibrates the "ground zero" signal of the pickup when there is no pluck. This means that the user, after turning the device on, should not play or touch any of the strings in order to calibrate to a proper threshhold. 
